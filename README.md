# チームスケジューラー

Team Scheduler は、小規模なチームが会議を計画し、会議室を予約し、スケジュールを共有するのを支援する Flask 製の Web アプリケーションです。ユーザーはサインアップしてログインし、イベントをチームメイトと共有して会議室の利用を調整できます。

## 機能

- 個人アカウントを管理するためのユーザー登録、ログイン、ログアウトのフロー。
- 1 週間をまとめて表示し、曜日を横方向、時間枠を縦方向に並べる週間プランナービュー。忙しい時間帯をひと目で把握でき、ARIA でラベル付けされたグリッドセルとキーボードフォーカス状態を備えています。
- 場所の詳細、部屋の割り当て、チーム参加者を含むスケジュールの作成・編集・削除。
- 使用中の部屋を誤って削除しないためのガードを備えた会議室管理の CRUD ツール。
- アプリ内の移動に合わせて主要なアクションを強調するフラッシュメッセージとナビゲーション。

## 前提条件

- Python 3.10 以降。
- `requirements.txt` に記載された Python パッケージ。
- （任意）本番環境で利用する `SECRET_KEY` 環境変数。設定されていない場合は既定値が利用されます。

## はじめに

1. **リポジトリをクローンし、プロジェクトディレクトリに移動します。**
   ```bash
   git clone <repository-url>
   cd sdd02
   ```
2. **仮想環境を作成して有効化します（推奨）。**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```
3. **依存関係をインストールします。**
   ```bash
   pip install -r requirements.txt
   ```
4. **Flask 用の環境変数を設定します。**
   ```bash
   export FLASK_APP=run.py
   export FLASK_ENV=development  # 任意。デバッグモードを有効化します
   export SECRET_KEY="change-me"  # 任意。既定の鍵を上書きします
   ```
5. **データベースを初期化します。**
   ```bash
   flask init-db
   ```
6. **開発サーバーを起動します。**
   ```bash
   flask run
   ```
7. **アプリにアクセスします。**
   ブラウザで [http://localhost:5000](http://localhost:5000) を開きます。

アプリケーションは既定で `app.db` に保存される SQLite データベースを使用します。別のデータベースを利用する場合は、Flask を起動する前に `DATABASE_URL` 環境変数を設定してください。

## 使い方

1. **登録とログイン。** 新しいアカウントを作成するか、既存アカウントでログインします。ログイン済みのユーザーはナビゲーションバーからいつでもカレンダーに戻れます。
2. **スケジュールを管理。** カレンダーの「Create Schedule」ボタンでイベントを追加します。各イベントにはタイトル、開始時刻、終了時刻が必須で、場所、部屋、共有参加者を追加できます。イベントは、その曜日の列と時間帯に一致する行に週間プランナー上で表示され、空き時間を素早く比較できます。自分が所有するスケジュールはカレンダーから直接編集または削除できます。
3. **チームメイトと共有。** スケジュールを作成または編集するときに、共有したいユーザーを追加します。共有されたイベントは受信者のカレンダー上でラベル表示されます。
4. **会議室を調整。** 「Meeting Rooms」ページで、名前と収容人数を持つ部屋を追加し、既存の部屋を更新または削除します。スケジュールに割り当てられている部屋は、該当するスケジュールが更新されるまで削除できません。
5. **サインアウト。** 作業が終わったらナビゲーションバーの「Log Out」リンクを使用します。

## 保守に関するメモ

- ローカルのデータベーススキーマをリセットする必要があるときは `flask init-db` を使用してください。
- 依存関係を追加・更新した場合は `requirements.txt` を更新してください。
- プロジェクトの進化に伴って、ユーザー向け機能やセットアップ手順の変更はこの README に反映させ続けてください。
- 週間プランナーの視覚的およびインタラクション要件については `docs/weekly_planner_design.md` を参照してください。

## テスト

- 自動テストスイートは `pytest` を使用します。`requirements.txt` の依存関係をインストールした後、プロジェクトルートで `pytest` を実行するとすべてのテストが走ります。
- テスト全体の考え方や想定するシナリオについては `docs/testing_strategy.md` を参照してください。
